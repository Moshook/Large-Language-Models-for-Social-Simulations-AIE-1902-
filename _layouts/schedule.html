---
layout: default
---

<header class="post-header">
    <h1 class="post-title">Schedule</h1>
</header>

{{ content }}

<div class="home" style="font-size: 0.8em;">
    <ul class="responsive-table" style="margin-left: 0;">
        <li class="table-header">
            <div class="col col-1">Event</div>
            <div class="col col-1-2">Date</div>
            <div class="col col-2">Description</div>
            <div class="col col-4">Course Material</div>
        </li>

        {% comment %} Step 1: 收集所有 due_event {% endcomment %}
        {% assign all_assignment_dues = "" | split: "" %}
        {% for asg in site.assignments %}
        {% if asg.due_event and asg.due_event.date %}
        {% assign all_assignment_dues = all_assignment_dues | push: asg.due_event %}
        {% endif %}
        {% endfor %}

        {% comment %} Step 2: 合并所有 events {% endcomment %}
        {% assign all_events = site.events | concat: site.lectures %}
        {% assign all_events = all_events | concat: site.assignments %}
        {% assign all_events = all_events | concat: all_assignment_dues %}

        {% comment %} Step 3: 去除没有 date 的对象 {% endcomment %}
        {% assign valid_events = "" | split: "" %}
        {% for event in all_events %}
        {% if event.date %}
        {% assign valid_events = valid_events | push: event %}
        {% endif %}
        {% endfor %}

        {% comment %} Step 4: 排序 {% endcomment %}
        {% assign all_events_sorted = valid_events | sort: "date" %}
        <!-- {%- assign all_assignment_dues = "" | split: "" -%}
        {%- for asg in site.assignments -%}
        {%- if asg.due_event -%}
        {%- assign all_assignment_dues = all_assignment_dues | push: asg.due_event -%}
        {%- endif -%}
        {%- endfor -%}

        {%- assign all_events = site.events | concat: site.lectures -%}
        {%- assign all_events = all_events | concat: site.assignments -%}
        {%- assign all_events = all_events | concat: all_assignment_dues -%}

        {%- assign valid_events = "" | split: "" -%}
        {%- for event in all_events -%}
        {%- if event.date -%}
        {%- assign valid_events = valid_events | push: event -%}
        {%- endif -%}
        {%- endfor -%}

        {%- assign all_events_sorted = valid_events | sort: "date" -%} -->

        {%- for event in all_events_sorted -%}
        <li class="table-row table-row-{{ event.type | default: 'unknown' }}">
            {% capture partial_path %}schedule_row_{{ event.type | default: 'unknown' }}.html{% endcapture %}
            {% include {{ partial_path }} event=event %}
        </li>
        {%- endfor -%}

    </ul>
</div>
<!-- ---
layout: default
---

<header class="post-header">
    <h1 class="post-title">Schedule</h1>
</header>

{{ content }}

<div class="home" style="font-size: 0.8em;">
    <ul class="responsive-table" style="margin-left: 0;">
        <li class="table-header">
            <div class="col col-1">Event</div>
            <div class="col col-1-2">Date</div>
            <div class="col col-2">Description</div>
            <div class="col col-4">Course Material</div>
        </li>

        {% assign all_events = site.events | concat: site.lectures %}
        {% assign all_events = all_events | concat: site.assignments %}

        {% for assignment in site.assignments %}
        {% if assignment.due_event %}
        {% assign all_events = all_events | push: assignment.due_event %}
        {% endif %}
        {% endfor %}

        {% assign all_events_sorted = all_events | sort: "date" %}

        {% for event in all_events_sorted %}
        <li class="table-row table-row-{{ event.type }}">
            {% include schedule_row_{{ event.type }}.html event=event %}
        </li>
        {% endfor %}

    </ul>
</div> -->
<!-- ---
layout: default
---

<header class="post-header">
    <h1 class="post-title">Schedule</h1>
</header>

{{ content }}

<div class="home" style="font-size: 0.8em;">
    <ul class="responsive-table" style="margin-left: 0;">
        <li class="table-header">
            <div class="col col-1">Event</div>
            <div class="col col-1-2">Date</div>
            <div class="col col-2">Description</div>
            <div class="col col-4">Course Material</div>
        </li>
        
        {% assign all_assignment_dues = site.assignments | map: "due_event" %}

        {% assign all_events = site.events | concat: site.lectures %}
        {% assign all_events = all_events | concat: site.assignments %}
        {% assign all_events = all_events | concat: all_assignment_dues %}
        {% assign all_events_sorted = all_events | sort: 'date' %}

        {% for event in all_events_sorted %}
        <li class="table-row table-row-{{ event.type}}">
            {% include schedule_row_{{ event.type }}.html event=event %}
        </li>
        {% endfor %}

    </ul>
</div> -->